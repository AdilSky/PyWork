#-*-coding:utf-8-*-#商城搜索功能自动化测试用例import sysreload(sys)sys.setdefaultencoding('utf8')from selenium import webdriverimport timeimport unittestfrom selenium.webdriver.common.action_chains import ActionChains#import baseinfofrom UiTest import baseinfoimport reclass search(unittest.TestCase):    u'''搜索功能测试'''    @ classmethod    def setUpClass(self):        self.base_url = baseinfo.base_url        self.username = baseinfo.undirect_username        self.password = baseinfo.undirect_password        self.driver = webdriver.Firefox()        time.sleep(1)        self.driver.maximize_window()        self.driver.get("%s/user/tologin"%self.base_url)        double_click = self.driver.find_element_by_id("username")        ActionChains(self.driver).double_click(double_click).perform()        self.driver.find_element_by_id("username").send_keys("%s" % self.username)        double_click = self.driver.find_element_by_id("password")        ActionChains(self.driver).double_click(double_click).perform()        self.driver.find_element_by_id("password").send_keys("%s" % self.password)        self.driver.find_element_by_id("sign_btn").click()        print(u"登录成功")    @ classmethod    def tearDownClass(self):        self.driver.quit()    def test_accept_search(self):         '''国药准字号搜索'''         try:            time.sleep(2)            self.driver.find_element_by_id("keywordInput").send_keys(u"国药准字Z41021116")            self.driver.find_element_by_id("header_search_btn").click()            self.driver.find_element_by_xpath('//*[@id="search_result_list"]/li/div/table/tbody/tr[2]/td[9]/p/a').click()            time.sleep(2)            handleList = self.driver.window_handles            time.sleep(1)            self.driver.switch_to.window(handleList[-1])            time.sleep(3)            #将页面滚动动条拖到底部            js = "var q=document.documentElement.scrollTop=10000"            time.sleep(5)            self.driver.execute_script(js)            time.sleep(5)            get_text = self.driver.find_element_by_xpath(".//*[@id='send']/div/table/tbody/tr[12]/td[2]").text            if get_text == "国药准字Z41021116":                print(u"国药准字号搜索成功")                get_text = 1            else:                print(u"国药准字号搜索失败")                get_text = 0                self.assertEqual(get_text, 1, msg=None)            time.sleep(5)         except BaseException as msg:             print(U"因未找到对应元素,测试用例未正常执行!")             print msgif __name__ == "__main__":    unittest.main()